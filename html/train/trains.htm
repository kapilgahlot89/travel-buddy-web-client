<!Doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trains</title>
    <link rel="stylesheet" type="text/css" href="../../css/TravelBuddy.css">
    <link rel="icon" type="image/png" href="../../images/page-icons/favicon.jpg">
    <style>
        /* minimal local styles to keep form hidden by default */
        #create-train-form{ display: none; max-width:600px; }
        #train-list{ display: none; max-width:600px; margin-top:12px; }
        #vande-bharat-section{ display: none; max-width:600px; margin-top:12px; }
        .train-item{ padding:8px 0; border-bottom:1px solid #eee; }
        .empty-message{ color:#666; padding:8px 0; }
        .vande-bharat-item{ padding:12px; margin:8px 0; border:1px solid #ddd; border-radius:4px; background:#f9f9f9; }
        .vande-bharat-item h3{ margin:0 0 8px 0; color:#0066cc; }
        .vande-bharat-item p{ margin:4px 0; color:#333; }
    </style>
</head>
<body>
<header>
    <h1 class="headline"><span><img class="page-icon" src="../../images/page-icons/train.png" alt="page icon"></span>Trains</h1>
    <hr>
</header>
<div class="container">
    <div id="menu_items" class="sidebar">
        <nav>
            <ul>
                <!-- changed link to open the form inline instead of navigating away -->
                <li><a class="menu-link" href="#" onclick="showCreateForm(event)"><strong>Create a train schedule</strong><span><img class="menu-icon" src="../../images/page-icons/train.png" alt="train"></span></a></li>
                <!-- new menu item to view available trains -->
                <li><a class="menu-link" href="#" onclick="showTrainList(event)"><strong>View available trains</strong><span><img class="menu-icon" src="../../images/page-icons/train.png" alt="train"></span></a></li>
                <!-- new menu item to check vande bharat trains -->
                <li><a class="menu-link" href="#" onclick="showVandeBharatTrains(event)"><strong>Check Vande Bharat trains</strong><span><img class="menu-icon" src="../../images/page-icons/train.png" alt="train"></span></a></li>
            </ul>
        </nav>
    </div>
    <div class="content">
        <!-- create-train-form: initially hidden, two <br> after each line as requested -->
        <form id="create-train-form" onsubmit="submitTrainForm(event)">
            <label for="trainName">Train Name:</label><br><br>
            <input id="trainName" type="text" name="trainName" required><br><br>

            <label for="fromStation">From:</label><br><br>
            <input id="fromStation" type="text" name="from" required><br><br>

            <label for="toStation">To:</label><br><br>
            <input id="toStation" type="text" name="to" required><br><br>

            <label for="departureTime">Departure Time:</label><br><br>
            <input id="departureTime" type="time" name="departure" required><br><br>

            <label for="arrivalTime">Arrival Time:</label><br><br>
            <input id="arrivalTime" type="time" name="arrival" required><br><br>

            <label for="days">Days:</label><br><br>
            <input id="days" type="text" name="days" placeholder="e.g., Mon, Wed, Fri"><br><br>

            <label for="price">Price:</label><br><br>
            <input id="price" type="number" name="price" min="0" step="0.01"><br><br>

            <button type="submit">Create Schedule</button>
        </form>

        <div id="train-list"></div>

        <div id="vande-bharat-section"></div>
    </div>
    <div class="rightbar">
    </div>
</div>

<script>
    function showCreateForm(e){
        if(e) e.preventDefault();
        var f = document.getElementById('create-train-form');
        var list = document.getElementById('train-list');
        var vbSection = document.getElementById('vande-bharat-section');
        // hide list and vande bharat section when showing the form
        list.style.display = 'none';
        vbSection.style.display = 'none';
        f.style.display = (f.style.display === 'block') ? 'none' : 'block';
    }

    function showTrainList(e){
        if(e) e.preventDefault();
        var f = document.getElementById('create-train-form');
        var list = document.getElementById('train-list');
        var vbSection = document.getElementById('vande-bharat-section');
        // hide form and vande bharat section when showing the list
        f.style.display = 'none';
        vbSection.style.display = 'none';
        // ensure a message if empty
        if(!list.hasChildNodes() || (list.childNodes.length === 0)){
            list.innerHTML = '<div class="empty-message">No trains available.</div>';
        }
        list.style.display = 'block';
    }

    function showVandeBharatTrains(e){
        if(e) e.preventDefault();
        var f = document.getElementById('create-train-form');
        var list = document.getElementById('train-list');
        var vbSection = document.getElementById('vande-bharat-section');
        // hide form and regular train list when showing vande bharat
        f.style.display = 'none';
        list.style.display = 'none';
        
        // populate with sample vande bharat trains
        vbSection.innerHTML = '<h2>Vande Bharat Express Trains</h2>' +
            '<div class="vande-bharat-item">' +
            '<h3>Vande Bharat Express (New Delhi - Varanasi)</h3>' +
            '<p><strong>Train Number:</strong> 22435/22436</p>' +
            '<p><strong>Departure:</strong> New Delhi - 06:00 AM</p>' +
            '<p><strong>Arrival:</strong> Varanasi - 02:00 PM</p>' +
            '<p><strong>Duration:</strong> 8 hours</p>' +
            '<p><strong>Frequency:</strong> Daily except Tuesday</p>' +
            '</div>' +
            '<div class="vande-bharat-item">' +
            '<h3>Vande Bharat Express (New Delhi - Katra)</h3>' +
            '<p><strong>Train Number:</strong> 22439/22440</p>' +
            '<p><strong>Departure:</strong> New Delhi - 06:00 AM</p>' +
            '<p><strong>Arrival:</strong> Katra - 02:00 PM</p>' +
            '<p><strong>Duration:</strong> 8 hours</p>' +
            '<p><strong>Frequency:</strong> Daily except Wednesday</p>' +
            '</div>' +
            '<div class="vande-bharat-item">' +
            '<h3>Vande Bharat Express (Mumbai Central - Gandhinagar)</h3>' +
            '<p><strong>Train Number:</strong> 20901/20902</p>' +
            '<p><strong>Departure:</strong> Mumbai Central - 06:25 AM</p>' +
            '<p><strong>Arrival:</strong> Gandhinagar - 12:35 PM</p>' +
            '<p><strong>Duration:</strong> 6 hours 10 minutes</p>' +
            '<p><strong>Frequency:</strong> Daily except Thursday</p>' +
            '</div>' +
            '<div class="vande-bharat-item">' +
            '<h3>Vande Bharat Express (Chennai - Mysore)</h3>' +
            '<p><strong>Train Number:</strong> 20607/20608</p>' +
            '<p><strong>Departure:</strong> Chennai - 05:50 AM</p>' +
            '<p><strong>Arrival:</strong> Mysore - 12:30 PM</p>' +
            '<p><strong>Duration:</strong> 6 hours 40 minutes</p>' +
            '<p><strong>Frequency:</strong> Daily except Monday</p>' +
            '</div>';
        
        vbSection.style.display = 'block';
    }

    function submitTrainForm(e){
        e.preventDefault();
        var form = e.target;
        var data = new FormData(form);
        var name = data.get('trainName') || '';
        var from = data.get('from') || '';
        var to = data.get('to') || '';
        var dep = data.get('departure') || '';
        var arr = data.get('arrival') || '';
        var days = data.get('days') || '';
        var price = data.get('price') || '';

        var list = document.getElementById('train-list');
        // remove 'No trains available.' message if present
        if(list.firstChild && list.firstChild.className === 'empty-message'){
            list.innerHTML = '';
        }
        var item = document.createElement('div');
        item.className = 'train-item';
        item.textContent = name + ' — ' + from + ' → ' + to + ' | Dep: ' + dep + ' Arr: ' + arr + ' | Days: ' + days + ' | Price: ' + price;
        list.appendChild(item);

        form.reset();
        form.style.display = 'none';
        var vbSection = document.getElementById('vande-bharat-section');
        vbSection.style.display = 'none';
        // show the list after creation
        list.style.display = 'block';
    }
</script>

</body>